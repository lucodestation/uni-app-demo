(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/poster2/poster2"],{107:function(e,t,n){"use strict";(function(e,t){var r=n(4);n(26);r(n(25));var a=r(n(108));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n(1)["default"],n(2)["createPage"])},108:function(e,t,n){"use strict";n.r(t);var r=n(109),a=n(111);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n(117),n(119);var o,c=n(32),u=Object(c["default"])(a["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],o);u.options.__file="pages/poster2/poster2.vue",t["default"]=u.exports},109:function(e,t,n){"use strict";n.r(t);var r=n(110);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},110:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return a})),n.d(t,"staticRenderFns",(function(){return o})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return r}));var a=function(){var e=this,t=e.$createElement;e._self._c},i=!1,o=[];a._withStripped=!0},111:function(e,t,n){"use strict";n.r(t);var r=n(112),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},112:function(e,t,n){"use strict";(function(e){var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(40)),i=r(n(5)),o=r(n(42)),c=(r(n(113)),r(n(115)));function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function s(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={data:function(){return{posterData:{goodsinfo:{image:"http://4s.duowencaiwu.com/uploads/20211229/2e5d7899d065551f989feeae2d36c7e0.jpg",name:"适用于通用汽车雨刮雨刷器喷水管玻璃水连接管橡胶软管三通直通y型t接头 黑色橡胶管2米配接头各2个",partsgoods_id:13,price:"0.01"},qrcode:"https://res.wx.qq.com/wxdoc/dist/assets/img/demo.ef5c5bef.jpg",userinfo:{avatar:"http://4s.duowencaiwu.com/uploads/20211214/5796f9c97e25bcfd6bee9e58dec3d581.png",nickname:"卢先生"}},tempFilePath:"",myCanvasWidth:0,myCanvasHeight:0,text:"this is a test this is a test this is a test this is a test this is a test this is a test this is a test "}},onLoad:function(){return(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{handleDrawPoster:function(){var t=this;return(0,o.default)(a.default.mark((function n(){var r,s;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.showLoading({mask:!0}),r=c.default.init("myCanvas",t),s=e.createSelectorQuery().in(t),s.select("#container").fields({id:!0,dataset:!0,rect:!0,size:!0,computedStyle:["background-color","border-radius"]}),s.selectAll("#container .canvas-image").fields({id:!0,dataset:!0,rect:!0,size:!0,computedStyle:["border-radius"]}),s.selectAll("#container .canvas-text").fields({id:!0,dataset:!0,rect:!0,size:!0,computedStyle:["font-size","font-weight","font-family","color","line-height"]}),s.select("#container .qrcode-wrap").fields({id:!0,dataset:!0,rect:!0,size:!0,computedStyle:["background-color","border-radius"]}),s.exec(function(){var n=(0,o.default)(a.default.mark((function n(s){var d,l,f,h,p,v,m,g,w,b,y,x,k,_,S,R;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("exec",s),d=s[0],t.myCanvasWidth=d.width,t.myCanvasHeight=d.height,l=d.top,f=d.left,n.next=8,c.default.drawFillRect({x:0,y:0,width:d.width,height:d.height,backgroundColor:d["background-color"],borderRadius:d["border-radius"]});case 8:h=s[3],r.save(),r.beginPath(),r.setShadow(0,0,7,"rgba(102, 102, 102, 0.05)"),r.arc(h.left-f+h.width/2,h.top-l+h.height/2,h.width/2,0,2*Math.PI),r.setFillStyle(h["background-color"]),r.fill(),r.closePath(),p=s[1],v=u(p),n.prev=18,v.s();case 20:if((m=v.n()).done){n.next=32;break}return g=m.value,n.next=24,e.getImageInfo({src:g.dataset.image});case 24:return w=n.sent,b=(0,i.default)(w,2),b[0],y=b[1],n.next=30,c.default.drawImage({image:y.path,x:g.left-f,y:g.top-l,width:g.width,height:g.height,borderRadius:g["border-radius"]});case 30:n.next=20;break;case 32:n.next=37;break;case 34:n.prev=34,n.t0=n["catch"](18),v.e(n.t0);case 37:return n.prev=37,v.f(),n.finish(37);case 40:x=s[2],k=u(x),n.prev=42,k.s();case 44:if((_=k.n()).done){n.next=52;break}return S=_.value,R={text:S.dataset.text,x:S.left-f,y:S.top-l+parseFloat(S["line-height"])-5,color:S["color"],fontFamily:S["font-family"],fontWeight:"700"===S["font-weight"]?"bold":"normal",fontSize:S["font-size"],lineHeight:S["line-height"]},S.dataset.maxLine&&(R.maxLine=S.dataset.maxLine,R.maxWidth=S.width),n.next=50,c.default.drawText(R);case 50:n.next=44;break;case 52:n.next=57;break;case 54:n.prev=54,n.t1=n["catch"](42),k.e(n.t1);case 57:return n.prev=57,k.f(),n.finish(57);case 60:return console.log("开始绘制"),n.next=63,c.default.draw(function(){var t=(0,o.default)(a.default.mark((function t(n){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(n),console.log("开始保存"),t.next=4,c.default.save(n).finally((function(){e.hideLoading()})).then((function(){e.showToast({title:"已保存到相册",icon:"none"})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.hideLoading()}));case 63:case"end":return n.stop()}}),n,null,[[18,34,37,40],[42,54,57,60]])})));return function(e){return n.apply(this,arguments)}}());case 8:case"end":return n.stop()}}),n)})))()}}};t.default=l}).call(this,n(2)["default"])},117:function(e,t,n){"use strict";n.r(t);var r=n(118),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},118:function(e,t,n){},119:function(e,t,n){"use strict";n.r(t);var r=n(120),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},120:function(e,t,n){}},[[107,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/poster2/poster2.js.map